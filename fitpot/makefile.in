#!/usr/sh
#
# makefile for fitpot
#

#-----------------------------------------------------------------------
# to be generated by configure script
#-----------------------------------------------------------------------
CPP= @CPP@
CPPFLAGS= @CPPFLAGS@
MPIFC= @FC@
MPIFLAGS= @FCFLAGS@
#-----------------------------------------------------------------------
# suffixes
.SUFFIXES: .o .f .F .f90 .F90
.f.o: 
	${MPIFC} -c ${MPIFLAGS} $<
.F.o: 
	${MPIFC} -c ${MPIFLAGS} ${CPPFLAGS} $<
.f90.o: 
	${MPIFC} -c ${MPIFLAGS} $<
.F90.o: 
	${MPIFC} -c ${MPIFLAGS} ${CPPFLAGS} $<

fitpot= NN.o read_input.o fitpot.o 
mods= mod_variables.o
args= iargc.o getarg.o
lbfgs= lbfgs.o

all: fitpot

clean:
	rm -f *.o *.mod *~ fitpot

nconv: node_conv.o ${mods} read_input.o util_pmd.o
	${MPIFC} ${MPIFLAGS} -o $@ ${mods} node_conv.o read_input.o util_pmd.o

fitpot: ${mods} ${fitpot} ${lbfgs}
	${MPIFC} ${MPIFLAGS} -o $@ ${mods} ${lbfgs} ${fitpot} 

#.....Dependencies
read_input.o: ${mods}
fitpot.o: ${mods} NN.o
NN.o: ${mods}

