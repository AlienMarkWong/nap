#!/usr/sh
#
# makefile in mkconf directory
#

#-----------------------------------------------------------------------
# to be generated by configure script
#-----------------------------------------------------------------------
CPP= @CPP@
CPPFLAGS= @CPPFLAGS@
#CPPFLAGS= -D__SHEAR__ -D__DISL__ -D__KOUKYU__ -D__WALL__
MPIFC= @FC@
MPIFLAGS= @FCFLAGS@
#-----------------------------------------------------------------------
# suffixes
.SUFFIXES: .o .f .F .f90 .F90
.f.o: 
	${MPIFC} -c ${MPIFLAGS} $<
.F.o: 
	${MPIFC} -c ${MPIFLAGS} ${CPPFLAGS} $<
.f90.o: 
	${MPIFC} -c ${MPIFLAGS} $<
.F90.o: 
	${MPIFC} -c ${MPIFLAGS} ${CPPFLAGS} $<


#-----mkconf program selection
mkconf_fcc= mkconf_fcc.o
mkconf_fcc_droplet= mkconf_fcc_droplet.o
mkconf_Al_fcc= mkconf_Al_fcc.o
mkconf_Al_FCC_edge= mkconf_Al_FCC_edge-disl.o
mkconf_2D_2kind= mkconf_2D_2kind.o
mkconf_2D_edge_disl= mkconf_2D_edge_disl.o
mkconf_Al_fcc_nanorod= mkconf_Al_fcc_nanorod.o
mkconf_Si111_2lc= mkconf_Si111_2lc.o
mkconf_Si_bulk= mkconf_Si_bulk.o
mkconf_Si_NEMD= mkconf_Si_NEMD.o
mkconf_Si_disl= mkconf_Si_disl.o
mkconf_BCC= mkconf_BCC.o
mkconf_BCC_nanorod= mkconf_BCC_nanorod.o
mkconf_BCC_FeH= mkconf_BCC_Fe-H.o
mkconf_BCC_FeH_crack= mkconf_BCC_FeH_crack.o
mkconf_BCC_edge= mkconf_BCC_edge-disl.o
mkconf_BCC_screw= mkconf_BCC_screw.o
mkconf_BCC_WHe= mkconf_BCC_W-He.o
mkconf_WHe_compress= mkconf_W-He-compress.o
mkconf_W_surface_migrate= mkconf_W_surface_migrate.o

mods=../pmd/mod_variables.o
util=../pmd/util_pmd.o util_akr.o

#-----------------------------------------------------------------------
# Make rule entries
#
clean:
	rm -f *.o *~
	ls mkconf_* | grep -v '.F' | xargs rm

#.....mkconfs
mkconf_fcc: ${mkconf_fcc} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_fcc} ${util}

mkconf_Al_fcc: ${mkconf_Al_fcc} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_Al_fcc} ${util}

mkconf_Al_FCC_edge: ${mkconf_Al_FCC_edge} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_Al_FCC_edge} ${util}

mkconf_2D_edge_disl: ${mkconf_2D_edge_disl} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_2D_edge_disl} ${util}

mkconf_Al_fcc_nanorod: ${mkconf_Al_fcc_nanorod} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_Al_fcc_nanorod} ${util}

mkconf_Si_bulk: ${mkconf_Si_bulk} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_Si_bulk} ${util}

mkconf_Si_NEMD: ${mkconf_Si_NEMD} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_Si_NEMD} ${util}

mkconf_Si_disl_screw_60: ${mkconf_Si_disl_screw_60} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_Si_disl_screw_60} ${util}

mkconf_BCC: ${mkconf_BCC} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_BCC} ${util}

mkconf_BCC_FeH: ${mkconf_BCC_FeH} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_BCC_FeH} ${util}

mkconf_BCC_FeH_crack: ${mkconf_BCC_FeH_crack} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_BCC_FeH_crack} ${util}

mkconf_BCC_edge: ${mkconf_BCC_edge} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_BCC_edge} ${util}

mkconf_BCC_screw: ${mkconf_BCC_screw} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_BCC_screw} ${util}

mkconf_BCC_WHe: ${mkconf_BCC_WHe} ${util} ${mods}
	${MPIFC} -o $@ ${mods} ${mkconf_BCC_WHe} ${util}

